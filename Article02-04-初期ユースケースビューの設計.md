# 初期ユースケースビューの設計

ユースケースとは、利用者にとってシステムを利用する価値を表し、1つ以上の機能の組み合わせによって提供されます。

ユースケースと機能は明確に異なります。たとえば注文を発注する際に、発送方法をプルダウンで選択するとします。これは明確に「機能」ですが、利用者の最終的な価値にはなりません。ユースケースとはあくまでも利用者に価値を提供するための、1つ以上の機能の集合を表すものとします。

私たちが実現すべきものは機能ではなく、ユーザーに提供する価値だと考えています。そのため機能ビューではなく、ユースケースビューとして扱います。

ユースケースビューは、ユースケース図を完成させることが目的ではありません。ユースケースは、ユースケース仕様書（一般的な機能定義書のレイヤーに類するドキュメント）で作成されているものとします。

ユースケースビューでは、システムのアーキテクチャを決定するためにパターンの導出と、アーキテクチャ設計を進める上で代表となるユースケースを選定します。そのうえで、代表的なユースケースをどのように実現するか設計します。

初期ユースケースビューの設計では、代表的なユースケースの選定までを行います。またアーキテクチャ設計は、要件定義と並行で行われることが多いため、すべてのユースケースが揃っている必要もありません。ドメイン内でとくに重要なユースケースが導出されていれば問題ないでしょう。

つぎのような表を用いると表現しやすいかと思います。

|No.|ユースケース|パターン|代表|説明|
|--|--|--|--|--|
|1|発注する|基本パターン|||
|2|再発注する|基本パターン|✅|アーキテクチャを検討する上で、基本パターンとして必要な内容が含まれており、かつ、最小のユースケースであるため|
|3|・・・|・・・|||
|4|・・・|・・・|||

ユースケースを一覧として記載し、それぞれのユースケースのパターンを抽出・割り当てます。類似したユースケースを同一のパターンに割当て、アーキテクチャの検討は、同一パターン内の代表的なユースケースを用いて設計します。

アーキテクチャを設計するにあたり、つねにすべてのユースケースを検討しつつ進めることは困難ですし、新たらしいユースケースが追加された場合に全面的に見なおすことも困難です。パターンを用いることでそれらの課題を緩和します。

そのうえで、この後のアーキテクチャを設計する際に利用する代表的なユースケースを決定します。抽象化されたパターンだけでは擬態的な検討が、不足する可能性があります。そのため、代表的なユースケースを決定することでアーキテクチャを具体化します。

代表的なユースケースは、パターンに必要な要素が含まれた最小のユースケースを選定することが好ましいでしょう。ただ、そう都合の良いユースケースが存在しない場合もあります。多少の大小は目をつぶり、一部不足するような場合は、不足部分を別途パターンとして抽出して、他のユースケースで補えば良いかと思います。

たとえば「再発注する」ユースケースには、複雑なクエリーや、発注データの登録が含まれます。CRUDのうちCreate（C）とReference（R）は含まれていますが、Update（U）とDelete（D）が含まれません。Createと比較してUpdateやDeleteに異なるアーキテクチャが必要なのであれば、それらを含むユースケースをUpdateパターンのように抽出することで補いましょう。

設計編の後編では「再発注する」ユースケースの実装を詰めていくことでアーキテクチャを設計します。

